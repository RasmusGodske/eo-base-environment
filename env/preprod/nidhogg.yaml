nidhogg:
  installCNI: false
  monitorNidhogg: false

  yggdrasil:
    repoURL: "https://github.com/Energinet-DataHub/eo-base-environment.git"
    # targetRevision: set from terraform
    ingressDomain: preprod.energioprindelse.dk

    eo:
      auth:
        env:
          OIDC_AUTHORITY_URL: "placeholder"
        envSecrets:
          OIDC_CLIENT_ID:
            secretName: eo-oidc-secret
            key: oidc_client_id
          OIDC_CLIENT_SECRET:
            secretName: eo-oidc-secret
            key: oidc_client_secret
        sealedSecret:
          eo-oidc-secret:
            encryptedData:
              oidc_client_id: "placeholder"
              oidc_client_secret: "placeholder"

  argo-cd-proxy-chart:
    argo-cd: 
      server: 
        extraArgs:
          - --insecure
          - --rootpath
          - /admin/argocd
        rbacConfig:
          policy.csv: |
            g, "argo.readonly", role:readonly
            g, "argo.admin", role:admin
          scopes: '[roles]'
        config:
          url: https://preprod.energioprindelse.dk/admin/argocd
          admin.enabled: "false"
          oidc.config: |
            name: Azure
            issuer: "https://login.microsoftonline.com/f7619355-6c67-4100-9a78-1847f30742e2/v2.0"
            clientID: $argocd-auth-secret:oidc.azure.clientId
            clientSecret: $argocd-auth-secret:oidc.azure.clientSecret
            requestedScopes:
              - openid
              - profile
              - email
